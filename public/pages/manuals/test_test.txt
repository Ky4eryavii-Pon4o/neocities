###############################################################################
1. Підготовка тестового стенду
Мат.плата
ОЗУ (2гб/4гб)
БП
HDD/SSD
Один/два монітори
Контролер тач
Купюроприймач(КП)
Принтер
Плата розширення COM
Клавыатура/миш
Підключення до мережі
Збираємо то все до купи, запускаємо стенд
-
До мат. плати приєднуємо ОЗУ, HDD/SSD, плату розширення COМ, монітори, мережу, принтер, КП, клавіатура/миш, БЖ.
До плати розширення COM приєднуємо КП та модем (якщо тестуємо модемне з"єднання) SIEMENS/CINTERION.
Монітори (VGA/DVI/HDMI). Зазвичай маємо два монітори з виходом VGA, для приєднання другого монітора треба ресівер VGA->DVI/HDMI. Приэднуэмо другий монітор через ресівер
Підключаємо контролер тач, маємо три інтерфейси підключення (2 вихідних і 1 вхідний). Вхідний інтерфейс має підключення типу MOLEX, приєднуємо його до БЖ. На виході маємо два інтерфейси, USB приєднуємо до USB на мат. платі, другий приєднаємо до котролера тач.
Підключення до мережі. Є три інтерфейси підключення, модем з СОМ портом, модем з USB (свисток) та Ethernet. Підключення модема через COM, приєднуємо СОМ порт модема до СОМ порта на мат. платі (передача даних), подаємо живлення через приєднання конектора 4 пін до модема. На іншому кінці маємо MOLEX, приєднуємо його до БЖ 
Підключення КП до стенду.  КП має два інтерфейси для підключення передача даних та живлення. Підключаємо кабель передачі даних до плати розширення COM ішою стороною до КП. Кабель живлення приєднуємо до MOLEX на БЖ іншою стороною до КП.

###############################################################################
2. Підготовка флешки з ОС

###############################################################################
3. Налаштування BIOS мат. плати
Налаштування типу загрузки Legacy/UEFI
Обов"язково включаємо авто запуск Мат.плати при отримані 220В
###############################################################################
4. Інсталяція ОС. Маємо підготовлену флешку з ОС.

1. Вимикаємо стенд
2. Приєднуємо флешку до USB
3. Вмикаємо стенд
4. Запускаємо стенд з флешки, заходимо в BIOS налаштовуєм порядок завантаження або натискаємо хоткей для входу в BOOT MENU.
5. Обираємо завантаження з нашої флешки UEFI. Маємо отримати вікно з вибором дій [малюнок з діями]
6. Обираємо потрібну ОС, натискаємо OK. [малюнок з вибором ОС].
7. [вікно 1] обираємо NO
8. [вікно 2] обираємо NO
9. Чекаємо кінець інсталяції (на цьому етапі маємо трохи почекати/попити кави)
10. Після успішної інсталяції отримаємо зображення з діями Reboot/Shutdown[малюнок з діями]
11. Обираємо Reboot
    !!!УВАГА!!!  НЕ ДІСТАВАЙТЕ ФЛЕШКУ РАНІШЕ, МОЖЕМО ОТРИМАТИ НЕ СПРАВНУ ФЛЕШКУ.
12. Дістаємо флешку після появи на екрані напису No Signal.
13. Очікуєм загрузку стенда.
14. На моніторі з"явиться головний екран з сервісами.

PROFIT!!!
###############################################################################
Калібрування екрана (1.7.7х64)
-
Маємо успішно встановлену свіжу ОС.
Два монітори нижній/верхній та підключений тач.
Після успішного встановлення ОС маємо провести калібровку тач+монітор
Запускаємо калібрування. Натискаємо на клавіатурі WIN+вправо, бачимо темний екран
Натискаємо WIN+Enter, відкривається термінал.
У вікні термінала пишемо команду sudo mc (натискаємо Enter), має відкритись файловий менеджер
[малюнока з mc]
Переходимо в папку /service. 
Обираємо файл *Calibration натискаємо Enter.
Система питає на якому моніторі провести клібрування.
[малюнок]
Обираємо Yes/No натисканням клавіши Y або N. Якщо натиснути Y калібрування буде проведено на тому ж моніторі. При віборі N, ОС переключить на другий монітор.
Відкриється екран калібрування (сірий екран з червоними хрестиками). 
Тапаємо по червоних хрестиках.
[малюнок екрана калібрування]
Після калібрування стенд перезавантажиться.
Головний екран з сервісами буде відображений на тому моніторі де проводили калібрування.
Перевіряємо, тапаєм по будь-якому сервісу.
################################################################################
Тестування контнролерів тач
Маємо 8 пристроїв контролерів тач. Кожен контроллер тач. тестується на свіжій ОС. Тобто, змінюєм контролер тач -> робимо чисту інсталяцію ОС! і тільки так.
Перевірку коректної роботи тач, робимо калібрування та переключення моніторів
Підключаємо новий тач. Контролер тач приєднуємо до панелі(скло на єкрані) USB та MOLEX->БЖ
Робимо свіжу інсталяцію ОС (ТАК! ЧИСТА УСТАНОВКА)
Після інсталяції запускаємо калібрування екрана (дивись кейс з калібрування екрана)
Через меню техніка (далі МТ) перевіряємо здатність вкл/викл другий монітор
заходимо в МТ-> пункт "Монитор"
в середині маємо ще три пункти. "Активность выходов", "Наличие 2го монитора", "График работы монитора"
Тапаэмо на пункт "Наличие 2го монитора"
Обираємо "2й монитор есть". Применить
Через декілька секунд/хвилин на другому моніторі має зявитись реклама.  
################################################################################
Master Touch Model: MT500USB - CALIB Not found any Touch (IboxOS.log) (був пошкоджений кабель живлення)
Перевірити зі свіжою ОС


################################################################################
Тестування купюроприймач (далі КП)
Маємо встановлену ОС
ОС налаштована на тестове середовище.
Зареєстрований термінал (у нашому випадку 777778)
Підключаємо КП на гарячу
Приєднуємо кабель передачі даних ->COM та кабель живлення->БЖ.
[малюнок з інтерфейсами підключення]
Перший раз пробдуємо приєднати КП на гарячу.
Перевіріяємо як стартує КП після перезавантаження
В МТ обираємо потрібний порт (/dev/ttyS1,2,3,4, etc)
Обираємо потрібний нам протокол (їх 3)
Якщо поппередні короки успішні ідемо на веріфай (крокуємо до моменту прийому платежа)

################################################################################
Тестування модемів (типів підключення)

Маємо налаштований стенд зі свіжою ОС.
Налаштований стенд на тестові сервери. Перевірити на який сервер ходимо через sudo sqlitebrowser відкрити базу ProxyConfigurtaion.
Є 4 типи підключення ethernet, 2g, 3g, 4g/LTE. Модеми 2g/3g/lte перевіряємо на всіх сім-картах
Ethernet. Заходимо в МТ -> "Соединение" обираємо тип  підключення (Тип соединеня) в нашому випадку Ethernet
Впевнитись що отримали потрібний IP (мережа 108). Дочикатися підключення, перевірити тим що дойти до веріфай
Обираємо декілька типів основних модемів 2g/3g/lte.

Модемне з"єднання (2g). Таких представників 2 SIEMENS/CINTERION, підключення однакове.
Приєднуємо COM порт модема до COM порта на мат. платі (передача даних)
Подаємо живлення через приєднання конектора 4 пін до модема. На іншому кінці маємо MOLEX, приєднуємо його до БЖ
Приєднаємо антену.
в МТ ідемо в "Модем: СОМ порт" обираємо порт до якого приєднано модем. /dev/ttyS з номером порта
в МТ ідемо в "Соединение" обираємо "Тип соединеня" помічаємо тип з"єднання gprs.
Натискаємо "применить" чекаємо з"єднання.
Перевіряємо відновлення з"єднання після перезавантаження.

Модемне з"єднання (3g) USB модеми типу "свисток".
Приэднуэмо модем до USB порта на мат. платі.
в МТ ідемо в "Модем: СОМ порт" обираємо порт до якого приєднано модем. /dev/ttyUSB0/1/2/3
в МТ ідемо в "Соединение" обираємо "Тип соединеня" помічаємо тип з"єднання gprs
Натискаємо "применить" чекаємо з"єднання. Дочикатися підключення, перевірити тим що дойти до веріфай
Перевіряємо відновлення з"єднання після перезавантаження.

Модемне з"єднання (4g/LTE) USB модеми типу "свисток".
Приэднуэмо модем до USB порта на мат. платі.
У випадку з CDC цей пункт пропускаємо (в МТ ідемо в "Модем: СОМ порт" обираємо порт до якого приєднано модем. /dev/ttyUSB0/1/2/3)
в МТ ідемо в "Соединение" обираємо "Тип соединеня" помічаємо тип з"єднання cdcEthernet
Натискаємо "применить" чекаємо з"єднання. Дочикатися підключення, перевірити тим що дойти до веріфай
Перевіряємо відновлення з"єднання після перезавантаження.
################################################################################
Отключаем профилактический рестарт (в TerminalConfiguration.db уст. TurnOffDailyNightReboot=1)
Shell.exe.config - вимикаємо всі оновлення (disableUpdateBusinessContent=true / disableUpdateSoftware=true / disableUpdateContent=true)
Утечка ресурсов порядок действий:
1. В консоли вводим команду sudo pidof mono и смотрим полученный id (например 349).
2. В консоли вводим с учетом id команду sudo pidstat -p 349 -v 2 >>1.txt
оставляем АСО на 10-12 часов, далее смотрим замеры fd-nr в файле ibox/1.txt. Ожидаемый результат: fd-nr в диапазоне (120-140), в логах Shell не появляются ошибки вида: "Error... TooManyOpenFiles", Shell не завершает аварийно работу.	 

Логирование памяти c интервалом в 1 минуту.

1. В окне терминала вводим sudo top -b -d600 >>top.log 
2. Проводим логирование длительный период времени, например сутки. 
3. Снимаем логи и кладем в папку Y:\IT\Developers\QA\Checklists\Memory Monitoring\ в такой структуре >> "версия оси" >> номер терминала >> logs. 
4. В Y:\IT\Developers\QA\Checklists\Memory Monitoring\(версия ОС)\(номер терминала) создаем .xml файл и вносим информацию по примеру (example.xml)
################################################################################




